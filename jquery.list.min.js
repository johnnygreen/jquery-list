/*! jQuery list 1.2.4 (c) github.com/teamdf/jquery-list | opensource.teamdf.com/license */
(function($){"use strict";var plugin_name='list';var plugin_version='1.2.4';var plugin_logging=true;var defaults={headerSelector:'dt',zIndex:1,fakeHeaderClass:'ui-'+plugin_name+'-fakeheader'};var scrollTimeout=null;var _private={log:function(){if(plugin_logging&&window.console&&window.console.log){try{window.console.log.apply(console,arguments);}catch(e){window.console.log(arguments);}}},updateHeader:function(target,newHeader){var data=target.data(plugin_name);if(data){data.fakeHeader=newHeader.clone().removeAttr('id').addClass(data.settings.fakeHeaderClass);data.fakeHeader.css({position:'absolute',top:0,width:data.headers.width(),zIndex:data.settings.zIndex});target.data(plugin_name,data).children(0).eq(0).replaceWith(data.fakeHeader);}},events:{resize:function(){var $this=$(this),data=$this.data(plugin_name);if(data){data.fakeHeader.width(data.headers.width());data.wrapper.css('maxHeight',$this.css('maxHeight'));}},scroll:function(event){var $this=$(this),data=$this.data(plugin_name);if(data){var newHeader=null,currentHeader=data.headers.eq(data.currentHeader),nextHeader=data.currentHeader>=data.headers.length-1?null:data.headers.eq(data.currentHeader+1),prevHeader=data.currentHeader<=0?null:data.headers.eq(data.currentHeader-1),trigger=false;data.containerTop=$this.offset().top+parseInt($this.css('marginTop'),10)+parseInt($this.css('borderTopWidth'),10);data.fakeHeader.css('top',0);if(prevHeader!==null){var top=currentHeader.offset().top,height=currentHeader.outerHeight();if(top>data.containerTop){data.fakeHeader.css('top',(top-height)-data.containerTop);_private.updateHeader($this,prevHeader);data.currentHeader=data.currentHeader-1;trigger=true;}
if((top-height)>data.containerTop){data.fakeHeader.css('top',0);newHeader=data.currentHeader-1;}}
if(nextHeader!==null){var top=nextHeader.offset().top,height=nextHeader.outerHeight();if((top-height)<data.containerTop){data.fakeHeader.css('top',(top-height)-data.containerTop);}
if(top<data.containerTop){data.fakeHeader.css('top',0);newHeader=data.currentHeader+1;}}
if(newHeader!==null){var $header=data.headers.eq(newHeader);data.currentHeader=newHeader;_private.updateHeader($this,$header);trigger=true;}
var max=(data.wrapper.scrollTop()>=data.wrapper.prop('scrollHeight')-data.wrapper.height());if(trigger||max||data.max&&!max){$this.trigger('headingChange',[data.currentHeader,data.headers.eq(data.currentHeader),max,event]);}
data.max=max;$this.data(plugin_name,data);}}}}
var methods={init:function(options){return $(this).each(function(){var settings=$.extend({},defaults);if(typeof options=='object')$.extend(settings,options);var $this=$(this),data=$this.data(plugin_name);if(!data){data={target:$this,wrapper:$this.wrapInner('<div class="ui-'+plugin_name+'" />').find('.ui-'+plugin_name+''),settings:settings,headers:[],containerTop:0,currentHeader:0,fakeHeader:null,scrolllist:[],original:{position:'',overflowX:'',overflowY:''},max:false}
$this.addClass('-'+plugin_name+'-container').css({position:$this.css('position')=='absolute'?'absolute':'relative',overflowY:'hidden'});data.headers=$this.find(data.settings.headerSelector);data.fakeHeader=data.headers.eq(0).clone().removeAttr('id').addClass(data.settings.fakeHeaderClass);data.wrapper.bind('scroll.'+plugin_name,$.proxy(_private.events.scroll,$this)).css({height:'100%',maxHeight:$this.css('maxHeight'),overflowY:'scroll',position:'relative'});data.fakeHeader.css({position:'absolute',top:0,width:data.headers.width(),zIndex:data.settings.zIndex});$(window).bind('resize.'+plugin_name,$.proxy(_private.events.resize,$this));$this.data(plugin_name,data).prepend(data.fakeHeader);}});},header:function(){var $this=$(this),data=$this.data(plugin_name);if(data){return data.currentHeader;}},scrollTo:function(newHeader,speed,easing,completion){return this.each(function(){var $this=$(this),data=$this.data(plugin_name);if(data){if(newHeader!==undefined&&!isNaN(newHeader)&&newHeader>=0&&newHeader<data.headers.length){var $header=data.headers.eq(newHeader),scrollTo=$header.position().top+data.wrapper.scrollTop()+parseInt($header.css('borderTopWidth'),10)+parseInt($header.css('borderBottomWidth'),10);if(!speed){data.wrapper.stop().scrollTop(scrollTo);data.currentHeader=newHeader;_private.updateHeader($this,$header);$this.trigger('headingChange',[newHeader,$header]);$this.data(plugin_name,data);}else{data.wrapper.stop().animate({scrollTop:scrollTo},speed,easing,completion);}}}});},option:function(key,value){var $this=$(this),data=$this.data(plugin_name);if(data){if(typeof key=='undefined')return data.settings;if(!key in data.settings)return false;if(typeof value=='undefined'){return data.settings[key];}else{data.settings[key]=value;return $this;}}},version:function(num){if(num){var v=plugin_version.split('.'),major=(Number(v[0])||1)+'',minor=(Number(v[1])||0)+'',bugfix=(Number(v[2])||0)+'',fill='000';return Number(fill.slice(0,3-major.length)+major+fill.slice(0,3-minor.length)+minor+fill.slice(0,3-bugfix.length)+bugfix);}else{return plugin_name+' v'+plugin_version;}},destroy:function(){return this.each(function(){var $this=$(this),data=$this.data(plugin_name);if(data){data.wrapper.children().unwrap();data.fakeHeader.remove();$this.css(data.original).removeData(plugin_name).removeClass('-'+plugin_name+'-container').unbind('.'+plugin_name);}});}};$.fn[plugin_name]=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.'+plugin_name);}}
$[plugin_name]={};$[plugin_name].log=function(l){if(l!==undefined){plugin_logging=l;}return plugin_logging;};})(jQuery);